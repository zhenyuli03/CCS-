(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66baecbd"],{1:function(e,t){},"7abe":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("ul",{staticClass:"item flex",staticStyle:{"margin-bottom":"8px"}},[a("li",{staticClass:"li-item flex-Item"},[e._v("\n      筛选换线对象：\n      "),a("el-cascader",{staticStyle:{"font-size":"20px","line-height":"28px",width:"250px"},attrs:{options:e.InstruOptions,disabled:e.optionsChanged,placeholder:e.showPlaceholder,filterable:""},on:{change:e.handleChange,focus:e.handlefocus},model:{value:e.selectCascadeValue,callback:function(t){e.selectCascadeValue=t},expression:"selectCascadeValue"}})],1),e._v(" "),a("li",{staticClass:"li-item"},[a("el-input",{ref:"input_sndata",staticStyle:{width:"400px","font-size":"18px"},attrs:{id:"sninput",placeholder:"请扫描"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},model:{value:e.sndata,callback:function(t){e.sndata=t},expression:"sndata"}},[a("template",{slot:"prepend"},[e._v("扫码框:")])],2),e._v(" "),a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary",icon:"el-icon-refresh",size:"medium",disabled:"Line type"!=e.selectCascadeValue[0]||!(e.filterDeviceData.length>0)},on:{click:e.handleOneEdit}},[e._v("一键换线")])],1)]),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{staticStyle:{width:"30%"},attrs:{span:6}},[a("div",{staticClass:"card right"},[a("div",{staticClass:"title"},[a("i",{staticClass:"el-icon-news"}),e._v("设备统计\n        ")]),e._v(" "),a("div",{staticClass:"wrap"},[a("ul",{staticClass:"infoWrap"},e._l(e.statsDatas,(function(t){return a("li",{key:t.name,staticClass:"small",on:{click:function(a){return e.showTotalHandle(t.name)}}},[a("p",{staticClass:"small"},[e._v(e._s(t.name))]),e._v(" "),a("p",{staticClass:"value"},[e._v(e._s(t.value))])])})),0),e._v(" "),a("div",{staticClass:"charttaxt"},[a("div",{staticClass:"charttitle"},[a("i",{staticClass:"el-icon-trophy"}),e._v(" 制程能力综合排名\n              "),a("el-select",{staticStyle:{width:"200px","font-size":"20px","margin-left":"120px"},attrs:{placeholder:"",size:"small"},on:{change:e.argsHandle},model:{value:e.selectArgsName,callback:function(t){e.selectArgsName=t},expression:"selectArgsName"}},e._l(e.argsAllOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{height:"350px","margin-top":"5px","margin-bottom":"5px","padding-left":"20px","padding-right":"20px"},attrs:{span:24}},[a("liuRadar",{staticClass:"ve-radar",attrs:{liuRadarData:e.liuRadarData}})],1),e._v(" "),a("el-col",{staticStyle:{height:"394px","margin-top":"2px","margin-bottom":"2px","padding-left":"20px","padding-right":"20px"},attrs:{span:24}},[a("liuBar",{staticClass:"ve-bar",attrs:{liuBarData:e.liuBarData}})],1)],1)],1)])])]),e._v(" "),a("el-col",{staticStyle:{width:"70%"},attrs:{span:18}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"card main"},[a("div",{staticClass:"title"},[a("i",{staticClass:"el-icon-news"}),e._v("设备状态\n            ")]),e._v(" "),a("div",{staticClass:"content"},[a("el-scrollbar",{staticStyle:{height:"730px"},attrs:{native:!1}},e._l(e.deviceData,(function(t,i){return a("div",{key:i,staticClass:"wrap",class:[1==t.status?"":2==t.status?"danger":3==t.status?"success":4==t.status?"warning":"waiting"]},[a("div",{staticClass:"content1"},[a("div",{staticClass:"lf",on:{click:function(a){return e.linkHandel(t.oneIP)}}},[a("img",{staticStyle:{width:"110px",height:"110px"},attrs:{src:e.imgUrl}})]),e._v(" "),a("div",{staticClass:"lr"},[e._l(t.parameter,(function(t,i){return a("div",{key:i,staticClass:"p"},[a("span",[e._v(e._s(t.name)+"：")]),e._v(" "),a("span",[e._v(e._s(t.value))])])})),e._v(" "),a("el-button",{staticStyle:{"font-size":"16px","margin-top":"5px"},attrs:{type:"primary",icon:"el-icon-refresh",size:"medium",disabled:5==t.status,plain:"",round:""},on:{click:function(a){return e.handleEdit(t,i)}}},[e._v("单站换线")])],2)]),e._v(" "),a("div",{staticClass:"tip",domProps:{textContent:e._s(t.instrutip)}}),e._v(" "),a("div",{staticClass:"checkboxContent"},[a("el-checkbox",{on:{change:function(t){return e.isCheckedHandle(i,t)}},model:{value:e.isCheckedData[i].isChecked,callback:function(t){e.$set(e.isCheckedData[i],"isChecked",t)},expression:"isCheckedData[index].isChecked"}})],1)])})),0)],1),e._v(" "),a("div",{staticClass:"card danger",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"title"},[a("i",{staticClass:"el-icon-warning"}),e._v("异常信息\n              ")]),e._v(" "),a("div",{staticClass:"content2"},[a("el-scrollbar",{staticStyle:{height:"150px"}},[a("ul",{staticClass:"textWrap"},e._l(e.infoData,(function(t){return a("li",{key:t.id},[a("span",{staticClass:"radiusWrap"}),e._v("\n                      "+e._s(t.text)+"\n                    ")])})),0)])],1)])])])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.OnedialogTitle,visible:e.OnedialogFormVisible,width:"30%",center:""},on:{"update:visible":function(t){e.OnedialogFormVisible=t}}},[a("el-form",{ref:"OnedialogForm",attrs:{model:e.OnedialogForm,rules:e.OnerulesDialog}},[a("el-form-item",{attrs:{label:"当前线别: ","label-width":e.formLabelWidth,size:"medium",prop:"newModel"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.OnedialogForm.line,callback:function(t){e.$set(e.OnedialogForm,"line",t)},expression:"OnedialogForm.line"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"更换机种: ","label-width":e.formLabelWidth,size:"medium",prop:"newModel"}},[a("el-input",{ref:"input_onenewModel",staticStyle:{width:"300px"},attrs:{placeholder:"请进行扫描或手动输入"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit1(t)}},model:{value:e.OnedialogForm.newModel,callback:function(t){e.$set(e.OnedialogForm,"newModel",t)},expression:"OnedialogForm.newModel"}})],1)],1),e._v(" "),"一键换线编辑"==e.OnedialogTitle?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.allHandle("OnedialogForm")}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancelHandle}},[e._v("取 消")])],1):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,width:"30%",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.rulesDialog}},[a("el-form-item",{attrs:{label:"当前线别: ","label-width":e.formLabelWidth,size:"medium",prop:"line"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.dialogForm.line,callback:function(t){e.$set(e.dialogForm,"line",t)},expression:"dialogForm.line"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"当前站别: ","label-width":e.formLabelWidth,size:"medium",prop:"station"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.dialogForm.station,callback:function(t){e.$set(e.dialogForm,"station",t)},expression:"dialogForm.station"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"当前机种: ","label-width":e.formLabelWidth,size:"medium",prop:"currentModel"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.dialogForm.currentModel,callback:function(t){e.$set(e.dialogForm,"currentModel",t)},expression:"dialogForm.currentModel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"更换机种: ","label-width":e.formLabelWidth,size:"medium",prop:"newModel"}},[a("el-input",{ref:"input_newModel",staticStyle:{width:"300px"},attrs:{placeholder:"请进行扫描或手动输入"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit2(t)}},model:{value:e.dialogForm.newModel,callback:function(t){e.$set(e.dialogForm,"newModel",t)},expression:"dialogForm.newModel"}})],1)],1),e._v(" "),"单站换线编辑"==e.dialogTitle?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.okHandle("dialogForm")}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancelHandle}},[e._v("取 消")])],1):e._e()],1),e._v(" "),a("el-dialog",{staticStyle:{"font-size":"30px"},attrs:{title:"设备断联详情","modal-append-to-body":!1,visible:e.instruDialogFormVisible,"append-to-body":"",width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){e.instruDialogFormVisible=t}}},[a("el-table",{staticStyle:{"font-size":"16px"},attrs:{border:"",data:e.instruGridDatas,"max-height":"300",width:"100%",size:"medium","header-row-class-name":"tableHead"}},[a("el-table-column",{attrs:{property:"nowtime",label:"当前时间"}}),e._v(" "),a("el-table-column",{attrs:{property:"instruName",label:"设备类型"}}),e._v(" "),a("el-table-column",{attrs:{property:"instruID",label:"设备ID"}}),e._v(" "),a("el-table-column",{attrs:{property:"instruIP",label:"设备IP"}}),e._v(" "),a("el-table-column",{attrs:{property:"line",label:"线别"}}),e._v(" "),a("el-table-column",{attrs:{property:"station",label:"站别"}}),e._v(" "),a("el-table-column",{attrs:{property:"remarks",label:"备注"}})],1)],1),e._v(" "),a("el-dialog",{staticStyle:{"font-size":"30px"},attrs:{title:"设备报警详情","modal-append-to-body":!1,visible:e.alarmDialogFormVisible,"append-to-body":"",width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){e.alarmDialogFormVisible=t}}},[a("el-table",{staticStyle:{"font-size":"16px"},attrs:{border:"",data:e.alarmGridDatas,"max-height":"300",width:"100%",size:"medium","header-row-class-name":"tableHead"}},[a("el-table-column",{attrs:{property:"nowtime",label:"报警时刻"}}),e._v(" "),a("el-table-column",{attrs:{property:"instruName",label:"设备类型"}}),e._v(" "),a("el-table-column",{attrs:{property:"instruID",label:"设备ID"}}),e._v(" "),a("el-table-column",{attrs:{property:"instruIP",label:"设备IP"}}),e._v(" "),a("el-table-column",{attrs:{property:"line",label:"线别"}}),e._v(" "),a("el-table-column",{attrs:{property:"station",label:"站别"}}),e._v(" "),a("el-table-column",{attrs:{property:"remarks",label:"备注"}})],1)],1),e._v(" "),a("el-dialog",{staticStyle:{"font-size":"30px"},attrs:{title:"设备待机详情","modal-append-to-body":!1,visible:e.waitDialogFormVisible,"append-to-body":"",width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){e.waitDialogFormVisible=t}}},[a("el-table",{staticStyle:{"font-size":"16px"},attrs:{border:"",data:e.waitGridDatas,"max-height":"300",width:"100%",size:"medium","header-row-class-name":"tableHead"}},[a("el-table-column",{attrs:{property:"nowtime",label:"待机时刻"}}),e._v(" "),a("el-table-column",{attrs:{property:"instruName",label:"设备类型"}}),e._v(" "),a("el-table-column",{attrs:{property:"instruID",label:"设备ID"}}),e._v(" "),a("el-table-column",{attrs:{property:"instruIP",label:"设备IP"}}),e._v(" "),a("el-table-column",{attrs:{property:"line",label:"线别"}}),e._v(" "),a("el-table-column",{attrs:{property:"station",label:"站别"}}),e._v(" "),a("el-table-column",{attrs:{property:"remarks",label:"备注"}})],1)],1)],1)},n=[],l=(a("ac6a"),function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"liuRadar"}})])}],r=a("ade3"),o=null,c=a("313e"),d={name:"liuRadar",props:{liuRadarData:{type:Array,default:function(e){return[{value:[3,4,.25,.03],name:"排名第一"},{value:[2,3,.33,.07],name:"排名最后"}]}}},mounted:function(){this.initCharts()},methods:{initCharts:function(){var e=this;o=c.init(document.getElementById("liuRadar"));for(var t=[],a=0;a<2;a++)for(var i=0;i<4;i++)t[4*a+i]=e.liuRadarData[a]["value"][i];var n=4;n=Math.floor(1.2*Math.max.apply(Math,t)*100)/100;var l={title:{text:"制程能力综合排名",show:!1,backgroundColor:"#0087dc",textStyle:{fontWeight:"normal",color:"#fff",fontSize:18}},tooltip:{},color:["#3CB371"," #FF8C00"],legend:{data:["排名第一","排名最后"],show:!1,top:"1%"},radar:{name:{textStyle:Object(r["a"])({fontSize:16,backgroundColor:"#F5F5F5",borderRadius:3,padding:[3,5]},"fontSize",18)},center:["45%","50%"],radius:120,indicator:[{name:"Cpk",max:n,color:"#1E90FF"},{name:"Cp",max:n,color:"#87CEEB"},{name:"Ca",max:n,color:" #5F9EA0"},{name:"P-Value",max:n,color:" #00CED1"}]},series:[{name:"综合排名首尾",type:"radar",data:e.liuRadarData}]};o.setOption(l)}},watch:{liuRadarData:function(e,t){this.initCharts()}}},u=d,m=a("2877"),p=Object(m["a"])(u,l,s,!1,null,null,null),h=p.exports,v=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},f=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"liuBar"}})])}],g=null,D=a("313e"),b={name:"liuBar",props:{liuBarData:{type:Object,default:function(e){return{yAxisdatas:["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10"],xAxisdatas:{cpk:[3,2.9,2.86,2.71,2.62,2.5,2.48,2.3,2.28,2],cp:[4,3.88,3.7,3.68,3.5,3.49,3.37,3.29,3.08,3],ca:[.25,.27,.28,.3,.31,.31,.32,.32,.33,.33],pvalue:[.03,.04,.04,.04,.05,.04,.06,.04,.06,.07]}}}}},mounted:function(){this.initCharts()},methods:{initCharts:function(){var e=this;g=D.init(document.getElementById("liuBar"));var t={title:{text:"制程能力排名",show:!1,backgroundColor:"#0087dc",textStyle:{fontWeight:"normal",color:"#fff",fontSize:16}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["Cpk","Cp","Ca","P-Value"],top:"4%"},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:e.liuBarData.yAxisdatas},series:[{name:"Cpk",type:"bar",color:"#1E90FF",data:e.liuBarData.xAxisdatas.cpk},{name:"Cp",type:"bar",color:"#87CEEB",data:e.liuBarData.xAxisdatas.cp},{name:"Ca",type:"bar",color:" #5F9EA0",data:e.liuBarData.xAxisdatas.ca},{name:"P-Value",type:"bar",color:" #00CED1",data:e.liuBarData.xAxisdatas.pvalue}]};g.setOption(t)}},watch:{liuBarData:function(e,t){this.initCharts()}}},x=b,_=Object(m["a"])(x,v,f,!1,null,null,null),C=_.exports,k=a("b775");function w(){return Object(k["a"])({url:"/instruOptions",method:"GET"})}function I(e){return Object(k["a"])({url:"/selectInstru",method:"GET",params:e})}function y(e){return Object(k["a"])({url:"/selectArgs",method:"GET",params:e})}function F(e){return Object(k["a"])({url:"/changline",method:"GET",params:e})}function O(){return Object(k["a"])({url:"/clflagtrue",method:"GET"})}function P(){return Object(k["a"])({url:"/clflagfalse",method:"GET"})}function M(e){return Object(k["a"])({url:"/changlinemore",method:"POST",params:e})}function S(){return Object(k["a"])({url:"/disconnetmore",method:"GET"})}function V(){return Object(k["a"])({url:"/alarmmore",method:"GET"})}function A(){return Object(k["a"])({url:"/waitmore",method:"GET"})}function E(e){return Object(k["a"])({url:"/snchangline",method:"POST",params:e})}var T=a("8055"),B=a.n(T);function $(e,t){var a=B()("http://"+t+":5001/autocl");return a}var z={name:"Home",data:function(){return{sndata:"",socket:null,statsDatas:[{name:"设备总数",value:8},{name:"报警总数",value:1},{name:"待机总数",value:1}],selectCascadeValue:[],optionsChanged:!1,showPlaceholder:"",InstruOptions:[],formLabelWidth:"100px",OnedialogTitle:"",OnedialogFormVisible:!1,OnedialogForm:{allIP:"",line:"",newModel:""},OnerulesDialog:{line:{required:!0,message:"请填写线别",trigger:"blur"},newModel:{required:!0,message:"请填写更换机种名",trigger:"blur"}},dialogTitle:"",dialogFormVisible:!1,dialogForm:{oneIP:"",index:0,line:"",station:"",currentModel:"",newModel:""},rulesDialog:{line:{required:!0,message:"请填写线别",trigger:"blur"},station:{required:!0,message:"请填写站别",trigger:"blur"},currentModel:{required:!0,message:"请填写当前机种名",trigger:"blur"},newModel:{required:!0,message:"请填写更换机种名",trigger:"blur"}},argsAllOptions:[{value:"温度",label:"温度"},{value:"接地阻抗",label:"接地阻抗"}],selectArgsName:"温度",liuRadarData:[{value:[3,4,.25,.03],name:"排名第一"},{value:[2.48,3.37,.32,.06],name:"排名最后"}],liuBarData:{yAxisdatas:["M1","M8","M6","M5","M2","M3","M4"],xAxisdatas:{cpk:[3,2.9,2.86,2.71,2.62,2.5,2.48],cp:[4,3.88,3.7,3.68,3.5,3.49,3.37],ca:[.25,.27,.28,.3,.31,.31,.32],pvalue:[.03,.04,.04,.04,.05,.04,.06]}},imgUrl:a("f299"),isCheckedData:[],deviceData:[],deviceData2:[{oneIP:"127.0.0.1",instrutip:"M1:温度350.0;接地阻抗1.017;",status:1,parameter:[{name:"设备",value:"WT1"},{name:"机种",value:"DPS-800AB-1 A"},{name:"线别",value:"S20"},{name:"站别",value:"智能烙铁_1"}]},{oneIP:"127.0.0.1",instrutip:"M2:SPC异常-温度430.0;接地阻抗1.016;",status:4,parameter:[{name:"设备",value:"WT1"},{name:"机种",value:"DPS-800AB-1 A"},{name:"线别",value:"S20"},{name:"站别",value:"智能烙铁_2"}]},{oneIP:"127.0.0.1",instrutip:"M3:超规格-温度365.0;接地阻抗1.016;",status:2,parameter:[{name:"设备",value:"WT1"},{name:"机种",value:"DPS-800AB-47 A"},{name:"线别",value:"S28"},{name:"站别",value:"智能烙铁_1"}]},{oneIP:"127.0.0.1",instrutip:"M4:正在发送换线指令",status:3,parameter:[{name:"设备",value:"WT1"},{name:"机种",value:"DPS-800AB-47 A"},{name:"线别",value:"S28"},{name:"站别",value:"智能烙铁_2"}]},{oneIP:"127.0.0.1",instrutip:"M5:温度350.0;接地阻抗1.016;",status:1,parameter:[{name:"设备",value:"WT1"},{name:"机种",value:"DPS-750AB-15 D"},{name:"线别",value:"S03"},{name:"站别",value:"智能烙铁_1"}]},{oneIP:"127.0.0.1",instrutip:"M6:温度420.0;接地阻抗1.016;",status:1,parameter:[{name:"设备",value:"WT1"},{name:"机种",value:"DPS-750AB-15 D"},{name:"线别",value:"S03"},{name:"站别",value:"智能烙铁_2"}]},{oneIP:"127.0.0.1",instrutip:"M7:待机中",status:5,parameter:[{name:"设备",value:"WT1"},{name:"机种",value:"DPS-800AB-35"},{name:"线别",value:"S04"},{name:"站别",value:"智能烙铁_1"}]},{oneIP:"127.0.0.1",instrutip:"M8:温度420.0;接地阻抗1.01;",status:1,parameter:[{name:"设备",value:"WT1"},{name:"机种",value:"DPS-800AB-35"},{name:"线别",value:"S04"},{name:"站别",value:"智能烙铁_2"}]}],infoData:[],instruDialogFormVisible:!1,alarmDialogFormVisible:!1,waitDialogFormVisible:!1,instruGridDatas:[{nowtime:"---",instruName:"---",instruID:"---",instruIP:"---",line:"---",station:"---",remarks:"---"},{nowtime:"---",instruName:"---",instruID:"---",instruIP:"---",line:"---",station:"---",remarks:"---"},{nowtime:"---",instruName:"---",instruID:"---",instruIP:"---",line:"---",station:"---",remarks:"---"}],alarmGridDatas:[{nowtime:"---",instruName:"---",instruID:"---",instruIP:"---",line:"---",station:"---",remarks:"---"},{nowtime:"---",instruName:"---",instruID:"---",instruIP:"---",line:"---",station:"---",remarks:"---"},{nowtime:"---",instruName:"---",instruID:"---",instruIP:"---",line:"---",station:"---",remarks:"---"}],waitGridDatas:[{nowtime:"---",instruName:"---",instruID:"---",instruIP:"---",line:"---",station:"---",remarks:"---"},{nowtime:"---",instruName:"---",instruID:"---",instruIP:"---",line:"---",station:"---",remarks:"---"},{nowtime:"---",instruName:"---",instruID:"---",instruIP:"---",line:"---",station:"---",remarks:"---"}]}},watch:{selectCascadeValue:function(){this.$refs.refSelect&&(this.$refs.refSelect.dropDownVisible=!1)}},computed:{filterDeviceData:function(){return this.isCheckedData.filter((function(e,t){if(1==e.isChecked)return e.itemIndex=t,e}))}},components:{liuRadar:h,liuBar:C},created:function(){},mounted:function(){var e=this;this.socket=$("/autocl",this.$root.PMM3IP),this.innitWebsocket(),this.$nextTick((function(){e.$refs.input_sndata.focus()}))},methods:{onSubmit:function(){var e=this;this.$refs.input_sndata.focus(),this.$refs.input_sndata.select(),E({sndata:this.sndata}).then((function(t){var a=t.data;console.log(a);for(var i=0;i<a.length;i++)if("11"==a[i].current_state)e.deviceData[a[i].clIDindex].status=1,e.deviceData[a[i].clIDindex].instrutip="换线成功";else if("12"==a[i].current_state)e.deviceData[a[i].clIDindex].status=2,e.deviceData[a[i].clIDindex].instrutip="换线失败,请检查模组与设备连接是否正常";else if("18"==a[i].current_state)e.deviceData[a[i].clIDindex].status=3,e.deviceData[a[i].clIDindex].instrutip="请继续扫码机种";else if("14"==a[i].current_state)e.deviceData[a[i].clIDindex].status=2,e.deviceData[a[i].clIDindex].instrutip="新机种不存在,请检查机种名称";else if("13"==a[i].current_state)e.deviceData[a[i].clIDindex].status=2,e.deviceData[a[i].clIDindex].instrutip="重复换线,请检查机种名称";else if("19"==a[i].current_state)e.deviceData[a[i].clIDindex].status=2,e.deviceData[a[i].clIDindex].instrutip="模组掉线,请检查模组网络";else if("16"==a[i].current_state)for(var n=0;n<a[i].clIDindex.length;n++)e.deviceData[a[i].clIDindex[n]].status=3,e.deviceData[a[i].clIDindex[n]].instrutip="请继续扫描新机种进行换线";else"17"==a[i].current_state?e.$message({message:"请先扫描设备ID再扫描机种",type:"error",center:!0,offset:60,customClass:"messageStyle",duration:3e3}):(e.deviceData[a[i].clIDindex].status=2,e.deviceData[a[i].clIDindex].instrutip="调用换线函数失败")})).catch((function(e){console.log(e)}))},isCheckedHandle:function(e,t){this.isCheckedData[e].isChecked=t},innitWebsocket:function(){var e=this;this.socket&&(this.socket.on("auto_change_line_data",(function(t){var a=t.data;e.selectCascadeValue=a.selectCascadeValue,e.InstruOptions=a.InstruOptions,e.statsDatas=a.statsDatas,e.argsAllOptions=a.argsAllOptions,e.selectArgsName=a.selectArgsName,e.liuRadarData=a.liuRadarData,e.liuBarData=a.liuBarData,e.deviceData=a.deviceData,e.newIsChecked=a.deviceData.map((function(e){var t={};return t.oneIP=e.oneIP,t.isChecked=!1,t})),e.newIsChecked.forEach((function(t){e.isCheckedData.forEach((function(e){t.oneIP==e.oneIP&&(t.isChecked=e.isChecked)}))})),e.isCheckedData=e.newIsChecked,e.infoData=a.infoData})),this.socket.on("auto_change_line_newInstruData",(function(t){var a=t.data;e.statsDatas=a.statsDatas,e.deviceData=a.deviceData,e.newIsChecked=a.deviceData.map((function(e){var t={};return t.oneIP=e.oneIP,t.isChecked=!1,t})),e.newIsChecked.forEach((function(t){e.isCheckedData.forEach((function(e){t.oneIP==e.oneIP&&(t.isChecked=e.isChecked)}))})),e.isCheckedData=e.newIsChecked,e.infoData=a.infoData})),this.socket.on("auto_change_line_upStatudata",(function(t){var a=t.data;e.statsDatas=a.statsDatas,e.selectCascadeValue=a.selectCascadeValue,e.selectArgsName=a.selectArgsName,e.liuRadarData=a.liuRadarData,e.liuBarData=a.liuBarData,e.deviceData=a.deviceData,e.newIsChecked=a.deviceData.map((function(e){var t={};return t.oneIP=e.oneIP,t.isChecked=!1,t})),e.newIsChecked.forEach((function(t){e.isCheckedData.forEach((function(e){t.oneIP==e.oneIP&&(t.isChecked=e.isChecked)}))})),e.isCheckedData=e.newIsChecked,e.infoData=a.infoData})))},showTotalHandle:function(e){var t=this,a=this;"设备总数"==e?(S().then((function(e){var a=e.data;t.instruGridDatas=a.instruGridDatas})).catch((function(e){console.log(e)})),a.instruDialogFormVisible=!0):"报警总数"==e?(V().then((function(e){var a=e.data;t.alarmGridDatas=a.alarmGridDatas})).catch((function(e){console.log(e)})),a.alarmDialogFormVisible=!0):(A().then((function(e){var a=e.data;t.waitGridDatas=a.waitGridDatas})).catch((function(e){console.log(e)})),a.waitDialogFormVisible=!0)},handleClose:function(e){this.instruGridDatas=[],this.alarmGridDatas=[],this.waitGridDatas=[],e()},argsHandle:function(e){var t=this;y({selectArgsName:e}).then((function(e){var a=e.data;t.liuRadarData=a.liuRadarData,t.liuBarData=a.liuBarData})).catch((function(e){console.log(e)}))},getInstrueDatas:function(){var e=this;I({selectObject:this.selectCascadeValue[0],selectName:this.selectCascadeValue[1]}).then((function(t){var a=t.data;e.statsDatas=a.statsDatas,e.argsAllOptions=a.argsAllOptions,e.deviceData=a.deviceData,e.newIsChecked=a.deviceData.map((function(e){var t={};return t.oneIP=e.oneIP,t.isChecked=!1,t})),e.newIsChecked.forEach((function(t){e.isCheckedData.forEach((function(e){t.oneIP==e.oneIP&&(t.isChecked=e.isChecked)}))})),e.isCheckedData=e.newIsChecked,e.infoData=a.infoData})).catch((function(e){console.log(e)}))},handlefocus:function(e){var t=this;w().then((function(e){var a=e.data;t.InstruOptions=a.InstruOptions,t.getInstrueDatas()})).catch((function(e){console.log(e)}))},handleChange:function(e){this.selectCascadeValue=e,this.getInstrueDatas()},checkHandle:function(e,t){this.deviceData[t].checked=e},handleOneEdit:function(){var e=this;O().catch((function(e){console.log(e)})),this.OnedialogFormVisible=!0,this.$nextTick((function(t){e.$refs.OnedialogForm.clearValidate(),e.$refs.input_onenewModel.focus()})),this.OnedialogTitle="一键换线编辑",this.OnedialogForm.line=this.deviceData[0].parameter[2].value,this.OnedialogForm.newModel="",this.OnedialogForm.allIP=[""]},handleEdit:function(e,t){var a=this;this.dialogFormVisible=!0,this.$nextTick((function(e){a.$refs.dialogForm.clearValidate(),a.$refs.input_newModel.focus()})),this.dialogTitle="单站换线编辑",this.dialogForm.line=e["parameter"][2].value,this.dialogForm.station=e["parameter"][3].value,this.dialogForm.currentModel=e["parameter"][1].value,this.dialogForm.newModel="",this.dialogForm.oneIP=e["oneIP"],this.dialogForm.index=t},allHandle:function(e){var t=this,a=this;this.$refs[e].validate((function(e){if(e){var i=[];a.OnedialogForm.newModel;a.filterDeviceData.forEach((function(e){var t={oneIP:e.oneIP,itemIndex:e.itemIndex};i.push(t)}));for(var n=0;n<i.length;n++)t.deviceData[i[n].itemIndex].status=3,t.deviceData[i[n].itemIndex].instrutip="正在发送换线指令";M({allIP:JSON.stringify(i),line:a.OnedialogForm.line,newModel:a.OnedialogForm.newModel}).then((function(e){for(var a=e.data,i=a.allclrestult,n=0;n<i.length;n++)"11"==i[n].current_state?(t.deviceData[i[n].itemIndex].status=1,t.deviceData[i[n].itemIndex].instrutip="换线成功",t.isCheckedData[i[n].itemIndex].isChecked=!1):"12"==i[n].current_state?(t.deviceData[i[n].itemIndex].status=2,t.deviceData[i[n].itemIndex].instrutip="换线失败,请检查模组与设备连接是否正常"):"14"==i[n].current_state?(t.deviceData[i[n].itemIndex].status=2,t.deviceData[i[n].itemIndex].instrutip="新机种不存在,请检查机种名称"):"13"==i[n].current_state?(t.deviceData[i[n].itemIndex].status=2,t.deviceData[i[n].itemIndex].instrutip="重复换线,请检查机种名称"):"19"==a.current_state?(t.deviceData[t.dialogForm.index].status=2,t.deviceData[t.dialogForm.index].instrutip="模组掉线,请检查模组网络"):(t.deviceData[i[n].itemIndex].status=2,t.deviceData[i[n].itemIndex].instrutip="调用换线函数失败")})).catch((function(e){console.log(e)})),t.OnedialogFormVisible=!1}}))},okHandle:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.deviceData[t.dialogForm.index].status=3,t.deviceData[t.dialogForm.index].instrutip="正在发送换线指令",F({oneIP:t.dialogForm.oneIP,line:t.dialogForm.line,newModel:t.dialogForm.newModel}).then((function(e){var a=e.data;"11"==a.current_state?(t.deviceData[t.dialogForm.index].status=1,t.deviceData[t.dialogForm.index].instrutip="换线成功"):"12"==a.current_state?(t.deviceData[t.dialogForm.index].status=2,t.deviceData[t.dialogForm.index].instrutip="换线失败,请检查模组与设备连接是否正常"):"14"==a.current_state?(t.deviceData[t.dialogForm.index].status=2,t.deviceData[t.dialogForm.index].instrutip="新机种不存在,请检查机种名称"):"13"==a.current_state?(t.deviceData[t.dialogForm.index].status=2,t.deviceData[t.dialogForm.index].instrutip="重复换线,请检查机种名称"):"19"==a.current_state?(t.deviceData[t.dialogForm.index].status=2,t.deviceData[t.dialogForm.index].instrutip="模组掉线,请检查模组网络"):(t.deviceData[t.dialogForm.index].status=2,t.deviceData[t.dialogForm.index].instrutip="调用换线函数失败")})).catch((function(e){console.log(e)})),t.dialogFormVisible=!1}))},linkHandel:function(e){var t="http://"+e+":5000/monitor";window.open(t,"_blank","width=1280,height=1080, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no")},onSubmit1:function(){var e=this;this.$refs.input_onenewModel.focus(),this.$refs.input_onenewModel.select(),clearTimeout(this.timer),this.timer=setTimeout((function(){e.allHandle("OnedialogForm")}),1e3)},onSubmit2:function(){var e=this;this.$refs.input_newModel.focus(),this.$refs.input_newModel.select(),clearTimeout(this.timer),this.timer=setTimeout((function(){e.okHandle("dialogForm")}),1e3)},cancelHandle:function(e){this.dialogFormVisible=!1,this.OnedialogFormVisible=!1,P().catch((function(e){console.log(e)}))}}},G=z,N=(a("9ce9"),Object(m["a"])(G,i,n,!1,null,"45f19844",null));t["default"]=N.exports},"93f2":function(e,t,a){},"9ce9":function(e,t,a){"use strict";var i=a("93f2"),n=a.n(i);n.a},f299:function(e,t,a){e.exports=a.p+"static/img/well.51ae43be.png"}}]);